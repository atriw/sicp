(load "4/4.39.scm")
(load "evaluator_test.scm")
(load "4/4.4.scm")
(load "4/4.6.scm")
(load "stream.scm")
(load "debug.scm")

(define (benchmark)
  (define suite
    (setup-test-amb (lambda (syntax) (new-derived-and-or-syntax (new-syntax syntax)))
                    '()
                    '()))
  (define (bench ambeval env)
    (ambeval multiple-dwelling env nop-succeed nop-fail)
    (ambeval multiple-dwelling-faster env nop-succeed nop-fail)
    (newline) (display "Benchmark origin multiple-dwelling") (newline)
    (with-print-time drain-amb ambeval '(multiple-dwelling) env)
    (newline) (display "Benchmark faster multiple-dwelling") (newline)
    (with-print-time drain-amb ambeval '(multiple-dwelling-faster) env)
    )
  (suite bench))
(benchmark)
